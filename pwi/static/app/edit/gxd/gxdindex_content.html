<br><br>
	<div class="container">
		<span us-spinner="{radius:30, width:8, length: 16}" spinner-key="page-spinner"></span>
		<div class="alert alert-danger" ng-show="vm.errors.api">
			<h5>Sorry! There was an error!</h5>
			<h6>{{ vm.errors.api.error }}</h6>
			<h6>{{ vm.errors.api.message }}</h6>
		</div>
		<form class="form-horizontal mousetrap">
			<div class="row">
				<div class="form-group col-lg-5">
					<label for="jnumid" class="label label-info">Reference J:</label>
					<input class="form-control mousetrap" ng-model="vm.selected.jnumid" id="jnumid"
					  keyboard-action="validateReference()"  keyboard-shortcut="tab"
					/>
					<input type="hidden" ng-model="vm.selected._refs_key" id="_refs_key"/>

					<label for="citation" class="label label-info">Citation</label>
					<input class="form-control mousetrap" ng-model="vm.selected.short_citation" id="citation"/>
					
					<label for="marker_symbol" class="label label-info">Marker</label>
					<input class="form-control mousetrap" ng-model="vm.selected.marker_symbol" id="marker_symbol"/>
					<input type="hidden" ng-model="vm.selected._marker_key" id="_marker_key"/>
					
					
					<label for="comments" class="label label-info">Notes</label>
					<textarea class="form-control mousetrap" ng-model="vm.selected.comments" id="comments">{{ vm.selected.comments }}</textarea>
					
					<div class="checkbox-inline">
						<label for="is_coded" class="label label-info">Coded?</label>
						<select id="is_coded" ng-model="vm.selected.is_coded" convert-to-boolean>
						    <option value="">Search All</option>
						    <option value="true">Yes</option>
						    <option value="false">No</option>
						</select>
					</div>

				</div>
				<div class="col-lg-2">
					<label for="_priority_key" class="label label-info">Priority:</label>
					<select id="_priority_key" ng-model="vm.selected._priority_key" convert-to-number>
						<option value="">Search All</option>
				      	<option ng-repeat="choice in priority_choices" value="{{choice._term_key}}"
				       	 ng-selected="vm.selected._priority_key===choice._term_key"
				     	>
				       	  {{choice.term}}
				      	</option>
					</select>
					
					<label for="_conditionalmutants_key" class="label label-info">Conditional:</label>
					<select id="_conditionalmutants_key" ng-model="vm.selected._conditionalmutants_key" convert-to-number>
					    <option value="">Search All</option>
				      	<option ng-repeat="choice in conditionalmutants_choices" value="{{choice._term_key}}"
				       	 ng-selected="vm.selected._conditionalmutants_key===choice._term_key"
				     	>
				       	  {{choice.term}}
				      	</option>
					</select>
				</div>
				<div class="col-lg-5">
					<button id="searchButton" ng-click="search()" ng-disabled="vm.loading" keyboard-shortcut="ctrl+s">Search</button>
					<button id="clearButton" ng-click="clear()" ng-disabled="vm.loading" keyboard-shortcut="ctrl+c">Clear</button>
					<button id="modifyButton" ng-click="modifyItem()" ng-disabled="vm.loading" keyboard-shortcut="ctrl+m">Modify</button>
					<button id="addButton" ng-click="addItem()" ng-disabled="vm.loading" keyboard-shortcut="ctrl+a">Add</button>
					<button id="deleteButton" ng-click="deleteItem()" ng-disabled="vm.loading" keyboard-shortcut="ctrl+d">Delete</button>
					
					<br><br>
					
					<span>Total GXD Index Count: {{vm.total_count}}</span>

					<table class="table table-bordered">
						<thead>
							<tr> <th>&nbsp;</th> <th>By</th> <th>Date</th> </tr>
						</thead>
						<tbody>
							<tr> 
							  <th>Created</th> 
							  <td>{{ vm.selected.createdby_login }}</td> 
							  <td>
							    <nobr>
							    <input type=input ng-model="vm.selected.creation_date" placeholder="mm/dd/yyyy"> 
							    <a href="#" ng-click="showDataFormatModal = !showDataFormatModal">?</a>
							  </td>
							</tr>
							<tr> 
							  <th>Modified</th>
							  <td>{{ vm.selected.modifiedby_login }}</td>
							  <td>
							    <nobr>
							    <input type=input ng-model="vm.selected.modification_date" placeholder="mm/dd/yyyy">
							    <a href="#" ng-click="showDataFormatModal = !showDataFormatModal">?</a>
							  </td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</form>
		
		<table class="table table-bordered">
			<thead>
				<tr>
				  <th>&nbsp;</th>
				  <th ng-repeat="choice in stageid_choices">
				    {{choice.term}}
				  </th>
				</tr>
			</thead>
			<tbody>
				<tr ng-repeat="choice in indexassay_choices">
				  <th>
				    {{choice.term}}
				  </th>
				  <td ng-repeat="cell in vm.indexStageCells[$index]" ng-click="toggleCell(cell)">
				    <span ng-if="cell.checked">X</span>
				  </td>
				</tr>
			</tbody>
		</table>

		<div class="row">			
			<dateformatmodal visible="showDataFormatModal" />
			  Results <span ng-show="vm.loading">Loading...</span> ({{ vm.searchResults.total_count }}):
			  <section ng-if="vm.searchResults.total_count > 0">
				<ul class="pager">
					<li><a href="#" ng-click="prevItem()" keyboard-shortcut="ctrl+p">Previous</a></li>
					<li><a href="#" ng-click="nextItem()" keyboard-shortcut="ctrl+n">Next</a></li>
				</ul>
				<table class="table">
				  <thead>
					<tr><th>Marker</th><th>J:</th><th>Citation</th></tr>
			      </thead>
				  <tbody>
					<tr class=""
						ng-class="($index==vm.selectedIndex) ? 'info' : ''"
						ng-click="setItem($index)"
						ng-repeat="record in vm.searchResults.items">
						<td>
						  {{record.marker_symbol}}
						</td>
						<td>
						  {{record.jnumid}}
						</td>
						<td>
						  {{record.short_citation}}
						</td>
					</tr>
			      </tbody>
				</table>
			  </section>
		</div>
		<pre>{{ vm.selected | json : spacing }}</pre>
	</div>
